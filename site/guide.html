---
layout: default
title: The Wedding of John and Jamie
---

<script src='assets/javascripts/underscore-min.js'></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/v1.5.2/mapbox.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v1.5.2/mapbox.css' rel='stylesheet' />
<link href='assets/css/map.css' rel='stylesheet' />

<div id='pane'><div id='map'></div></div>

<div class="row">
  <div class="col-md-6" id="locations">
    <div class="row section section-location">
      <div class="col-md-12 location" id='cover' class='cover active' onclick='setActive(0, true)'>
        <h1>Welcome to New York</h1>
        <p>Let's make one thing clear right from the start: THANK YOU. Making the trip to New York City isn't going to be easy for everyone, and you have a special place in our hearts for making this journey.</p>
      	<p>If you're in for the weekend, you might have some time to take in the best of what New York has to offer. These are our picks.</p>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <header>Restaurants</header>
      </div>
    </div>
    <div class="row section section-location">
      <div class="col-md-12 location" id='char' onclick='setActive(1)'>
        <h3>Char No. 4</h3>
        <p>Lots of great whiskey.</p>
        <a class="btn btn-default btn-sm" href="#" role="button">Map</a>
        <a class="btn btn-default btn-sm" href="#" role="button">Reviews</a>
        <a class="btn btn-default btn-sm" href="#" role="button">WWW</a>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 location" id='chuko' onclick='setActive(2)'>
        <h3>Chuko</h3>
        <p>This is a ramen restaurant near our house.</p>
        <a class="btn btn-default btn-sm" href="#" role="button">Map</a>
        <a class="btn btn-default btn-sm" href="#" role="button">Reviews</a>
        <a class="btn btn-default btn-sm" href="#" role="button">WWW</a>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 location" id='shack' onclick='setActive(3)'>
        <h3>Shake Shack</h3>
        <p>Get the double stack!</p>
        <a class="btn btn-default btn-sm" href="#" role="button">Map</a>
        <a class="btn btn-default btn-sm" href="#" role="button">Reviews</a>
        <a class="btn btn-default btn-sm" href="#" role="button">WWW</a>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 location" id='prospect' onclick='setActive(4)'>
        <h3>Prospect Park</h3>
        <p>Enjoy a nice stroll around the park.</p>
        <a class="btn btn-default btn-sm" href="#" role="button">Map</a>
        <a class="btn btn-default btn-sm" href="#" role="button">Reviews</a>
        <a class="btn btn-default btn-sm" href="#" role="button">WWW</a>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <header>Bars</header>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 location" id='amsterdam' onclick='setActive(5)'>
        <h3>Amsterdam 106</h3>
        <p>We had our first date here.</p>
        <a class="btn btn-default btn-sm" href="#" role="button">Map</a>
        <a class="btn btn-default btn-sm" href="#" role="button">Reviews</a>
        <a class="btn btn-default btn-sm" href="#" role="button">WWW</a>
      </div>
    </div>
  </div>
</div>

<script>
  // Make this map happen
  var map = L.mapbox.map('map', 'jpinley.gk82f9l5', {
    zoomControl: false
  })
    .setView([40.6853, -73.9755], 14);

  var geoJson = {
      type: 'FeatureCollection',
      features: [
      {
          type: 'Feature',
          properties: {
              id: '0',
          },
          geometry: {
              type: 'Point',
              coordinates: [-73.9637, 40.6937]
          }
      },
      {
          type: 'Feature',
          properties: {
              title: 'Char',
              id: '1',
              "marker-color": "#fc4353",
              "marker-size": "large",
              "marker-symbol": "restaurant"
          },
          geometry: {
              type: 'Point',
              coordinates: [-73.9915, 40.6848]
          }
      },
      {
          type: 'Feature',
          properties: {
              title: 'Chuko',
              id: '2',
              "marker-color": "#fc4353",
              "marker-size": "large",
              "marker-symbol": "restaurant"
          },
          geometry: {
              type: 'Point',
              coordinates: [-73.9680, 40.6802]
          }
      },
      {
          type: 'Feature',
          properties: {
              title: 'Shake Shack',
              id: '3',
              "marker-color": "#fc4353",
              "marker-size": "large",
              "marker-symbol": "fast-food"
          },
          geometry: {
              type: 'Point',
              coordinates: [-73.9889, 40.6917]
          }
      },
      {
          type: 'Feature',
          properties: {
              title: 'Prospect Park',
              id: '4',
              "marker-color": "#fc4353",
              "marker-size": "large",
              "marker-symbol": "park2"
          },
          geometry: {
              type: 'Point',
              coordinates: [-73.9704, 40.6653]
          }
      }]
  };

  // Add markers to the map
  map.markerLayer.setGeoJSON(geoJson);

  // Array of all markers
  var markers = [];
  map.markerLayer.eachLayer(function(marker) { markers.push(marker); });

  // Array of location elements.
  var locations = document.getElementsByClassName('location');

  // Helper to set the active location.
  var setActive = function(index) {
    // Set active class on locations.
    _(locations).each(function(s) { s.className = s.className.replace(' active', '') });
    locations[index].className += ' active';
    // Move to marker and open
    // TODO: bring back easing
    map.panTo(markers[index].getLatLng());
    map.setZoom(14);
    markers[index].openPopup();

    // Set a body class for the active location.
    document.body.className = 'location-' + index;

    return true;
  };

  // Move the map and open a popup when you click on a marker
  map.markerLayer.on('click', function(e) {
    setActive(e.layer.feature.properties.id);
  });

  // Bind to scroll events to find the active section.
  // window.onscroll = _(function() {
  //   // IE 8
  //   if (window.pageYOffset === undefined) {
  //     var y = document.documentElement.scrollTop;
  //     var h = document.documentElement.clientHeight;
  //   } else {
  //     var y = window.pageYOffset;
  //     var h = window.innerHeight;
  //   }
  //
  //   // If scrolled to the very top of the page set the first section active.
  //   if (y === 0) return setActive(0, true);
  //
  //   // Otherwise, conditionally determine the extent to which page must be
  //   // scrolled for each section. The first section that matches the current
  //   // scroll position wins and exits the loop early.
  //   var memo = 0;
  //   var buffer = (h * 0.3333);
  //   var active = _(locations).any(function(el, index) {
  //     memo += el.offsetHeight;
  //     return y less than (memo-buffer) ? setActive(index, true) : false;
  //   });
  //
  //   // If no section was set active the user has scrolled past the last section.
  //   // Set the last section active.
  //   if (!active) setActive(locations.length - 1, true);
  // }).debounce(10);

  // Set map to fit marker boundary.
  map.fitBounds(map.markerLayer.getBounds());

</script>
